
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>SMSO Api Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;php&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#senders" class="toc-h1 toc-link" data-title="Senders">Senders</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-the-list-of-available-senders" class="toc-h2 toc-link" data-title="Get the list of available senders">Get the list of available senders</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#messages" class="toc-h1 toc-link" data-title="Messages">Messages</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#sending-a-message" class="toc-h2 toc-link" data-title="Sending a message">Sending a message</a>
                  </li>
                  <li>
                    <a href="#checking-the-message-status" class="toc-h2 toc-link" data-title="Checking the message status">Checking the message status</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#message-statuses" class="toc-h1 toc-link" data-title="Message Statuses">Message Statuses</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#status-descriptions" class="toc-h2 toc-link" data-title="Status Descriptions">Status Descriptions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="Webhooks">Webhooks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#message-status" class="toc-h2 toc-link" data-title="Message status">Message status</a>
                  </li>
                  <li>
                    <a href="#receiving-messages" class="toc-h2 toc-link" data-title="Receiving messages">Receiving messages</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#credit" class="toc-h1 toc-link" data-title="Credit">Credit</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#checking-remaining-credit" class="toc-h2 toc-link" data-title="Checking remaining credit">Checking remaining credit</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://app.smso.ro/'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the SMSO API! You can use our API to access SMSO API endpoints.</p>

<p>We have language bindings in Shell, PHP, JavaScript! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl -H <span class="s2">"X-Authorization: API-KEY"</span>  <span class="s2">"https://app.smso.ro/api/v1/"</span> 

<span class="c"># full example as query string</span>
curl <span class="s2">"https://app.smso.ro/api/v1/send?sender=4&amp;to=0722334455&amp;body=Message%20Body&amp;apiKey=API-KEY"</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// via file_get_contents
</span><span class="nv">$opts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"http"</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s2">"method"</span> <span class="o">=&gt;</span> <span class="s2">"POST"</span><span class="p">,</span>
        <span class="s2">"header"</span> <span class="o">=&gt;</span> <span class="s2">"X-Authorization: API-KEY"</span>
    <span class="p">]</span>
<span class="p">];</span>

<span class="nv">$context</span> <span class="o">=</span> <span class="nb">stream_context_create</span><span class="p">(</span><span class="nv">$opts</span><span class="p">);</span>

<span class="nv">$content</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">'https://app.smso.ro/api/v1/'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$content</span><span class="p">);</span>

<span class="c1">// via guzzle
</span><span class="k">use</span> <span class="nx">GuzzleHttp\Client</span><span class="p">;</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">;</span>
<span class="nv">$request</span> <span class="o">=</span>  <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'https://app.smso.ro/api/v1/'</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">'headers'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'X-Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'API-KEY'</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">]);</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nb">json_decode</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">()));</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// soon</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>API-KEY</code> with your Tean&#39;s API key from our <a href="https://app.smso.ro/developers/api">developer page</a>.</p>
</blockquote>

<p>SMSO uses API keys to allow access to the API. You can register a new SMSO API key at our <a href="https://app.smso.ro/developers/api">developer page</a>.</p>

<p>SMSO expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<ol>
<li>Via a header: <code>X-Authorization: API-KEY</code></li>
<li>Via a query string, either POST OR GET, just append it to the URL like <em>&amp;apiKey=API-KEY</em></li>
</ol>

<aside class="notice">
You must replace <code>API-KEY</code> with your personal API key.
</aside>
<h1 id='senders'>Senders</h1><h2 id='get-the-list-of-available-senders'>Get the list of available senders</h2><pre class="highlight plaintext"><code>
curl -H "X-Authorization: API-KEY"  "https://app.smso.ro/api/v1/senders" 

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">GuzzleHttp\Client</span><span class="p">;</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">;</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'https://app.smso.ro/api/v1/senders'</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">'headers'</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">'X-Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'API-KEY'</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">]);</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// nothing yet </span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"1847"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"pricePerMessage"</span><span class="p">:</span><span class="mi">3</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves all the available senders in the the team.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://app.smso.ro/api/v1/senders</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<p>None</p>

<aside class="success">
Remember — a happy request is an authenticated request!
</aside>  
<h1 id='messages'>Messages</h1><h2 id='sending-a-message'>Sending a message</h2><pre class="highlight shell tab-shell"><code>
curl --request POST --header <span class="s1">'X-Authorization: smso-api-key'</span> <span class="s2">"https://app.smso.ro/api/v1/send"</span> <span class="se">\</span>
  -d <span class="s2">"sender=4"</span> <span class="se">\</span>
  -d <span class="s2">"to=+40722334455"</span> <span class="se">\</span>
  -d <span class="s2">"body=Testing"</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">GuzzleHttp\Client</span><span class="p">;</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">;</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span> <span class="s1">'https://app.smso.ro/api/v1/send'</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">'headers'</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">'X-Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'smso-api-key'</span><span class="p">,</span>
        <span class="p">],</span>
       <span class="s1">'form_params'</span> <span class="o">=&gt;</span> <span class="p">[</span>
           <span class="s1">'to'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
           <span class="s1">'body'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
           <span class="s1">'sender'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
       <span class="p">],</span>
<span class="p">]);</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nb">json_decode</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">()));</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// nothing yet</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint sends an SMS Message</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://app.smso.ro/api/v1/send</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>to</td>
<td>Yes</td>
<td>E.164 Format. The + is optional</td>
</tr>
<tr>
<td>sender</td>
<td>Yes</td>
<td>The ID of the sender</td>
</tr>
<tr>
<td>body</td>
<td>Yes</td>
<td>Contents of the message</td>
</tr>
<tr>
<td>type</td>
<td>No</td>
<td>Type of the message. Can be &#39;marketing&#39; or &#39;transactional&#39;, based on the type of communication the message is intended for. Used to filter out unsubscribed users when set to &#39;marketing&#39;.</td>
</tr>
<tr>
<td>webhook</td>
<td>No</td>
<td>Identical to webhook_status, preserved for legacy purposes</td>
</tr>
<tr>
<td>webhook_status</td>
<td>No</td>
<td>Webhook for receiving the SMS message status</td>
</tr>
<tr>
<td>webhook_responses</td>
<td>No</td>
<td>Webhook for receiving the SMS message reply</td>
</tr>
</tbody></table>

<aside class="success">
Remember — check the webhook for the complete detals on the message. [Webhook documentation](#webhooks)
</aside>  

<!-- ## Sending a message via SIM

```shell

curl --request POST --header 'X-Authorization: smso-api-key' "https://app.smso.ro/api/v1/send/sim \
  -d "to=+40722334455" \
  -d "body=Testing"s

```

```php
<?php
use GuzzleHttp\Client;

$client = new Client;
$request = $client->request('POST', 'https://app.smso.ro/api/v1/send', [
        'headers' => [
            'X-Authorization' => 'smso-api-key',
        ],
       'form_params' => [
           'to' => '',
           'body' => '',
           'sender' => '',
       ],
]);

var_dump(json_decode($request->getBody()->getContents()));
```

```javascript
// nothing yet
```

> The above command returns JSON structured like this:

```json
{
  "status": 200,
  "responseToken": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"
}
```

This endpoint sends an SMS Message with the predefined sender of SIM

### HTTP Request

`POST https://app.smso.ro/api/v1/send/sim`

### Query Parameters

Parameter | Required? | Description
--------- | ------- | -----------
to                | Yes | E.164 Format. The + is optional   
body              | Yes | Contents of the message
webhook           | No  | Identical to webhook_status, preserved for legacy purposes
webhook_status    | No  | Webhook for receiving the SMS message status
webhook_responses | No  | Webhook for receiving the SMS message reply

<aside class="success">
Remember — check the webhook for the complete detals on the message. [Webhook documentation](#webhooks)
</aside>   -->
<h2 id='checking-the-message-status'>Checking the message status</h2><pre class="highlight shell tab-shell"><code>
curl --request POST <span class="s2">"https://app.smso.ro/api/v1/status"</span> <span class="se">\</span>
  -d <span class="s2">"responseToken=aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"</span>

// also GET  
curl <span class="s2">"https://app.smso.ro/api/v1/status?responseToken=aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">GuzzleHttp\Client</span><span class="p">;</span><span class="nx">s</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">;</span>

<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'https://app.smso.ro/api/v1/status?responseToken=aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee'</span><span class="p">);</span>
<span class="c1">// also POST  
</span><span class="nv">$request</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span> <span class="s1">'https://app.smso.ro/api/v1/status'</span><span class="p">,</span> <span class="p">[</span>
          <span class="s1">'form_params'</span> <span class="o">=&gt;</span> <span class="p">[</span>
              <span class="s1">'responseToken'</span> <span class="o">=&gt;</span> <span class="s1">'aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee'</span><span class="p">,</span>
          <span class="p">],</span>
      <span class="p">]);</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nb">json_decode</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">()));</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// soon </span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delivered"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sent_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-1 15:18:20"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"delivered_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-1 15:18:25"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"receiver"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+40722334455"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"mcc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"226"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"mnc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint sends an SMS Message</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST or GET https://app.smso.ro/api/v1/status</code></p>
<h3 id='query-parameters-2'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>responseToken</td>
<td>Yes</td>
<td>The uuid from the SEND</td>
</tr>
</tbody></table>

<aside class="notice">
No authentifications is required for checking the status.
</aside>  
<h1 id='message-statuses'>Message Statuses</h1><pre class="highlight shell tab-shell"><code>// nothing
</code></pre><pre class="highlight php tab-php"><code>// nothing
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// nothing</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">nothing</span><span class="w">
</span></code></pre>
<p>Message status description </p>

<p>The message can take a number of states.</p>
<h3 id='status-descriptions'>Status Descriptions</h3>
<table><thead>
<tr>
<th>Status</th>
<th>Final</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>dispatched</td>
<td>No</td>
<td>The message is in the process of sending to the network. (rarely seen)</td>
</tr>
<tr>
<td>sent</td>
<td>No</td>
<td>The message has been sent to the network.</td>
</tr>
<tr>
<td>delivered</td>
<td>Yes</td>
<td>The message has been delivered to the phone.</td>
</tr>
<tr>
<td>undelivered</td>
<td>Yes</td>
<td>The message was undelivered.</td>
</tr>
<tr>
<td>expired</td>
<td>Yes</td>
<td>The message is expired.</td>
</tr>
<tr>
<td>error</td>
<td>Yes</td>
<td>There was an error sending the message.</td>
</tr>
</tbody></table>

<aside class="notice">
Keep in mind, if you get a final status, you can discad other updates.  
</aside>  
<h1 id='webhooks'>Webhooks</h1><h2 id='message-status'>Message status</h2><pre class="highlight shell tab-shell"><code>
<span class="c"># use this command to simulate an incomming request to test yout webhook</span>

curl --request POST <span class="s2">"https://your-server.com/your-webhook-endpoint"</span> <span class="se">\</span>
  -d <span class="s2">"uuid=aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"</span> <span class="se">\</span>
  -d <span class="s2">"status=sent"</span> <span class="se">\</span>
  -d <span class="s2">"sent_at=2019-05-01 12:30:09"</span> <span class="se">\</span>
  -d <span class="s2">"delivered_at=2019-05-01 12:20:09"</span> <span class="se">\</span>
  -d <span class="s2">"receiver[number]=+40722334455"</span> <span class="se">\</span>
  -d <span class="s2">"receiver[mcc]=226"</span> <span class="se">\</span>
  -d <span class="s2">"receiver[mnc]=03"</span>
</code></pre><pre class="highlight php tab-php"><code>// nothing yet 
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// nothing yet </span>
</code></pre>
<blockquote>
<p>You can use an app like <a href="https://postb.in">postb.in</a> to test incoming requests.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">no</span><span class="w"> </span><span class="err">output</span><span class="w">
</span></code></pre>
<p>This is an endpoint on your application side that handles the status of the message.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://your-server.com/your-webhook-endpoint</code></p>

<aside class="notice">
Remember that webhooks can be set up either in your team's account or per message sent.
</aside>  
 
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Can be empty?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>uuid</td>
<td>No</td>
<td>Uuid received from sending the message</td>
</tr>
<tr>
<td>status</td>
<td>No</td>
<td>Message status</td>
</tr>
<tr>
<td>sent_at</td>
<td>No</td>
<td>Time sent to the network</td>
</tr>
<tr>
<td>delivered_at</td>
<td>Yes</td>
<td>Time delivered to phone</td>
</tr>
<tr>
<td>receiver[&#39;number&#39;]</td>
<td>No</td>
<td>Receiving number in E.164 Format.</td>
</tr>
<tr>
<td>receiver[&#39;mcc&#39;]</td>
<td>No</td>
<td>Mobile Country Code</td>
</tr>
<tr>
<td>receiver[&#39;mnc&#39;]</td>
<td>No</td>
<td>Mobile Network Code</td>
</tr>
</tbody></table>

<aside class="success">
Remember: All dates are in UTC. 
</aside>
<h2 id='receiving-messages'>Receiving messages</h2><pre class="highlight shell tab-shell"><code>
<span class="c"># use this command to emulate a webhopok</span>

curl --request POST <span class="s2">"https://your-server.com/your-webhook-endpoint"</span> <span class="se">\</span>
  -d <span class="s2">"body=Nu raspunzi la sms..."</span> <span class="se">\</span>
  -d <span class="s2">"replied_to=aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"</span> <span class="se">\</span>
  -d <span class="s2">"received_at=2019-05-01 12:30:09"</span> <span class="se">\</span>
  -d <span class="s2">"sender['number']=+40722334455"</span> <span class="se">\</span>
  -d <span class="s2">"sender['mcc']=226"</span> <span class="se">\</span>
  -d <span class="s2">"sender['mnc']=03"</span>

</code></pre><pre class="highlight php tab-php"><code>// soon 

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// soon </span>
</code></pre>
<blockquote>
<p>You can use an app like https://postb.in/ to test incoming requests.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">
</span></code></pre>
<p>This is an endpoint on your application side that handles receiving messages.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://your-server.com/your-webhook-endpoint</code></p>

<aside class="notice">
Remember that webhooks can be set up either in your team's account or per message sent.
</aside>  
 
<h3 id='query-parameters-2'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Can be empty?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>Yes</td>
<td>Contents of the message</td>
</tr>
<tr>
<td>replied_to</td>
<td>Yes</td>
<td>Uuid of the message that the number received and is now responding to</td>
</tr>
<tr>
<td>received_at</td>
<td>No</td>
<td>Time the message was received</td>
</tr>
<tr>
<td>sender[&#39;number&#39;]</td>
<td>No</td>
<td>Sender number in E.164 Format.</td>
</tr>
<tr>
<td>sender[&#39;mcc&#39;]</td>
<td>No</td>
<td>Mobile Country Code</td>
</tr>
<tr>
<td>sender[&#39;mnc&#39;]</td>
<td>No</td>
<td>Mobile Network Code</td>
</tr>
</tbody></table>

<aside class="success"> 
Remember: All dates are in UTC. 
</aside>
  
<h1 id='errors'>Errors</h1>
<p>The SMSO API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid. See errors attached.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>402</td>
<td>Payment Required -- You don&#39;t have enough credit to send the message.</td>
</tr>
</tbody></table>
<h1 id='credit'>Credit</h1><h2 id='checking-remaining-credit'>Checking remaining credit</h2><pre class="highlight shell tab-shell"><code>
curl --request GET --header <span class="s1">'X-Authorization: smso-api-key'</span> <span class="s2">"https://app.smso.ro/api/v1/credit-check"</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">GuzzleHttp\Client</span><span class="p">;</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">;</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'https://app.smso.ro/api/v1/credit-check'</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">'headers'</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">'X-Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'smso-api-key'</span><span class="p">,</span>
        <span class="p">],</span>
<span class="p">]);</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nb">json_decode</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">()));</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// nothing yet</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"credit_value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">4847.72</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint returns the remaining credit for the team</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://app.smso.ro/api/v1/check-credit</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<p>None.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
